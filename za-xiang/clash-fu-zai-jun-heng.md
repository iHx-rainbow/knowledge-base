# Clash 负载均衡

负载均衡策略

* `consistent-hashing` 将会把相同顶级域名的请求分配给策略组内的同一个代理节点
* `round-robin` 将会把所有的请求分配给策略组内不同的代理节点

### 轮询和散列负载均衡策略比较

Clash的负载均衡策略主要包括轮询（Round-Robin）和一致性哈希（Consistent Hashing）两种方式，这两种方式的主要区别在于它们分配请求的方式不同。

1. **轮询（Round-Robin）**：这是一种简单的负载均衡策略，它将所有的请求按照顺序分配到各个代理上。例如，如果有三个代理，那么第一个请求会被分配到第一个代理，第二个请求会被分配到第二个代理，第三个请求会被分配到第三个代理，第四个请求会再次被分配到第一个代理，以此类推。这种方式的优点是实现简单，但可能会在某些代理负载较大时导致性能瓶颈。
2. **一致性哈希散列（Consistent Hashing）**：这是一种更为复杂的负载均衡策略，它通过使用哈希函数将请求分配到代理上。在这种策略下，每个代理都被分配一个哈希值，然后每个请求的哈希值会被计算出来，并分配给哈希值最接近的代理。当一个代理失败或新的代理加入时，只会影响到哈希值附近的一小部分请求，从而实现更为平滑的负载均衡。这种方式的优点是能够更好地处理代理的动态变化，但实现起来相对复杂。

### 各自特点

轮询

轮询方式会循环切换不同节点，比如我们使用speedtest进行测速时，可用看到connections日志中会分配不同的节点，当我们每个节点带宽有限时，使用这种方式，可以大大提供客户端的科学上网网速，达到网速叠加的效果。

散列

散列方式会将同一个域名的请求全部分到同一个节点，从而实现按域名进行节点分流的效果。\
此种方式适用于风控较强的场景，避免被网站检查到不同区域IP登录。

